-- EVERY STORED PROCEDURE RETURN a RETURNVALUE
-- if IT IS 0 then means Successfull
-- other number is unsuccessfull

USE Contacts;
GO
CREATE PROCEDURE GET_ALL_ROLE_OF_A_CONTACT_WITH_TRY_CATCH_WITH_RETURN
(
	@ContactId	INT
)
AS
BEGIN;
BEGIN TRY;
	SELECT R.RoleTitle FROM Roles R
	JOIN ContactRoles CR
	ON CR.RoleId = R.RoleId
	JOIN Contacts C
	ON C.ContactId = CR.ContactId
	WHERE C.ContactId = @ContactId;
	PRINT 'SUCCESSFULLY FETCHED';
	
END TRY
BEGIN CATCH;
	PRINT 'ERROR PROVIDE A NUMERIC VALUE';
	PRINT 'ERROR MESSAGE IS : '+ ERROR_MESSAGE();
	RETURN -1; -- unsuccesful
END CATCH;
RETURN 0; -- success
END;

DECLARE @RETURNSTATUS INT;
EXEC @RETURNSTATUS  = GET_ALL_ROLE_OF_A_CONTACT_WITH_TRY_CATCH_WITH_RETURN 2;

PRINT 'STATUS '+ CONVERT(VARCHAR(10),@RETURNSTATUS);